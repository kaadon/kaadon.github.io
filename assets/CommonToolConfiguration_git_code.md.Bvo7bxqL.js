import{_ as e,C as i,c as l,o as p,j as a,$ as o,G as d,a as n,w as h}from"./chunks/framework.Dso0fr_r.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"CommonToolConfiguration/git/code.md","filePath":"CommonToolConfiguration/git/code.md","lastUpdated":1744970094000}'),c={name:"CommonToolConfiguration/git/code.md"},r={id:"git-代码部署",tabindex:"-1"};function u(g,s,k,b,m,C){const t=i("center");return p(),l("div",null,[a("h2",r,[d(t,null,{default:h(()=>s[0]||(s[0]=[n(" Git 代码部署")])),_:1}),s[1]||(s[1]=n()),s[2]||(s[2]=a("a",{class:"header-anchor",href:"#git-代码部署","aria-label":'Permalink to "<center> Git 代码部署</center>"'},"​",-1))]),s[3]||(s[3]=o(`<h3 id="_1-部署秘钥" tabindex="-1">1. 部署秘钥 <a class="header-anchor" href="#_1-部署秘钥" aria-label="Permalink to &quot;1. 部署秘钥&quot;">​</a></h3><ul><li>服务器生成秘钥</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;your_email@example.com&quot;</span></span></code></pre></div><ul><li>添加秘钥: 将一下代码添加到 <code>~/.bashrc</code> 文件中</li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 启动 ssh-agent 并设置环境变量</span></span>
<span class="line"><span>if [ -z &quot;$SSH_AUTH_SOCK&quot; ] || ! ps -p &quot;$SSH_AGENT_PID&quot; &gt; /dev/null 2&gt;&amp;1; then</span></span>
<span class="line"><span>    eval &quot;$(ssh-agent -s)&quot;</span></span>
<span class="line"><span>fi</span></span>
<span class="line"><span></span></span>
<span class="line"><span>SSH_KEY=&quot;$HOME/.ssh/id_rsa&quot;</span></span>
<span class="line"><span>if [ -f &quot;$SSH_KEY&quot; ]; then</span></span>
<span class="line"><span>    ssh-add -l 2&gt;/dev/null | grep &quot;$(ssh-keygen -lf $SSH_KEY | awk &#39;{print $2}&#39;)&quot; &gt; /dev/null || ssh-add &quot;$SSH_KEY&quot;</span></span>
<span class="line"><span>fi</span></span></code></pre></div><ul><li>添加秘钥到 GitHub/GitLab/Gitee/Gitea</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看公钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa.pub</span></span></code></pre></div><blockquote><p>将公钥添加到仓库配置中的(部署秘钥/Deploy keys),一般如果是公共服务器不要给与写权限,只读即可</p></blockquote><ul><li>git 远程必须使用 ssh 的形式</li></ul><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 以gitea 为例</span></span>
<span class="line"><span>git@git.boolcdn.net:8022/[组织/用户]/[仓库名].git</span></span>
<span class="line"><span># 以github 为例</span></span>
<span class="line"><span>git@github.com/[组织/用户]/[仓库名].git</span></span></code></pre></div>`,10))])}const F=e(c,[["render",u]]);export{y as __pageData,F as default};
